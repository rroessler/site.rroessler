{
    "name": "talos",
    "displayName": "Talos",
    "scopeName": "source.tal",
    "patterns": [
        { "include": "#comments" },
        { "include": "#punctuation" },
        { "include": "#directives" },
        { "include": "#declarations" },
        { "include": "#statements" },
        { "include": "#expressions" }
    ],
    "repository": {
        "directives": {
            "patterns": [{ "include": "#module-directives" }, { "include": "#decorator-directives" }]
        },
        "declarations": {
            "patterns": [
                { "include": "#function-declaration" },
                { "include": "#enum-declaration" },
                { "include": "#class-declaration" },
                { "include": "#storage-modifiers" }
            ]
        },
        "statements": {
            "patterns": [
                { "include": "#loop-statement" },
                { "include": "#for-statement" },
                { "include": "#match-statement" },
                { "include": "#conditional-statement" },
                { "include": "#return-statement" },
                { "include": "#control-statement" },
                { "include": "#exception-statement" }
            ]
        },
        "expressions": {
            "patterns": [
                { "include": "#operators" },
                { "include": "#literals" },
                { "include": "#identifiers" },
                { "include": "#annotations" }
            ]
        },
        "punctuation": {
            "patterns": [
                { "include": "#end-of-expression" },
                { "include": "#punctuation-comma" },
                { "include": "#punctuation-accessor" },
                { "include": "#punctuation-arrow" },
                { "include": "#punctuation-separator" }
            ]
        },
        "literals": {
            "patterns": [
                { "include": "#void-literal" },
                { "include": "#boolean-literal" },
                { "include": "#numeric-literal" },
                { "include": "#string-literal" }
            ]
        },
        "module-directives": {
            "match": "(?<!\\.)\\b(?:(import)|(export)|(namespace)|(as))\\b",
            "captures": {
                "1": { "name": "keyword.other.import.tal" },
                "2": { "name": "keyword.other.export.tal" },
                "3": { "name": "keyword.other.namespace.tal" },
                "4": { "name": "keyword.other.as.tal" }
            }
        },
        "decorator-directives": {
            "match": "\\@",
            "name": "keyword.operator.decorator.tal"
        },
        "storage-modifiers": {
            "name": "storage.modifier.tal",
            "match": "(?<!\\.)\\b(let|mut|type|public|private|protected|static|abstract)\\b"
        },
        "function-declaration": {
            "match": "(?<!\\.)\\b(?:(fn))\\b",
            "captures": {
                "1": { "name": "storage.type.function.tal" }
            }
        },
        "enum-declaration": {
            "name": "keyword.other.enum.tal",
            "match": "(?<!\\.)\\b(enum)\\b"
        },
        "class-declaration": {
            "match": "(?<!\\.)\\b(?:(struct)|(class)|(self))\\b",
            "captures": {
                "1": { "name": "keyword.other.class.tal" },
                "2": { "name": "keyword.other.class.tal" },
                "3": { "name": "keyword.other.self.tal" }
            }
        },
        "return-statement": {
            "match": "(?<!\\.)\\b(?:(return))\\b",
            "captures": {
                "1": { "name": "keyword.control.flow.return.tal" }
            }
        },
        "control-statement": {
            "match": "(?<!\\.)\\b(?:(break)|(continue)|(panic))\\b",
            "captures": {
                "1": { "name": "keyword.control.flow.break.tal" },
                "2": { "name": "keyword.control.flow.continue.tal" },
                "3": { "name": "keyword.control.flow.panic.tal" }
            }
        },
        "conditional-statement": {
            "match": "(?<!\\.)\\b(?:(if)|(else))\\b",
            "captures": {
                "1": { "name": "keyword.control.conditional.if.tal" },
                "2": { "name": "keyword.control.conditional.else.tal" }
            }
        },
        "loop-statement": {
            "match": "(?<!\\.)\\b(loop)\\b",
            "captures": {
                "1": { "name": "keyword.control.loop.tal" }
            }
        },
        "for-statement": {
            "match": "(?<!\\.)\\b(for)\\b",
            "captures": {
                "1": { "name": "keyword.control.loop.for.tal" }
            }
        },
        "match-statement": {
            "match": "(?<!\\.)\\b(match)\\b",
            "captures": {
                "1": { "name": "keyword.control.switch.match.tal" }
            }
        },
        "exception-statement": {
            "match": "(?<!\\.)\\b(throw)\\b,",
            "captures": {
                "1": { "name": "keyword.control.flow.throw.tal" }
            }
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.assignment.compound.tal",
                    "match": "\\*=|/=|%=|\\*\\*=|\\+=|-="
                },
                {
                    "name": "keyword.operator.assignment.compound.bitwise.tal",
                    "match": "\\&=|\\|=|\\^=|<<=|>>="
                },
                {
                    "name": "keyword.operator.bitwise.shift.tal",
                    "match": "<<|>>"
                },
                {
                    "name": "keyword.operator.comparison.tal",
                    "match": "==|!="
                },
                {
                    "name": "keyword.operator.relational.tal",
                    "match": "<=|>=|<|>"
                },
                {
                    "name": "keyword.operator.logical.tal",
                    "match": "\\!|\\|\\||&&\\b"
                },
                {
                    "name": "keyword.operator.bitwise.tal",
                    "match": "\\&|~|\\^|\\|"
                },
                {
                    "name": "keyword.operator.assignment.tal",
                    "match": "="
                },
                {
                    "name": "keyword.operator.coalesce.tal",
                    "match": "\\?:"
                },
                {
                    "name": "keyword.operator.arithmetic.tal",
                    "match": "\\*|\\*\\*|%|%|/|-|\\+"
                },
                {
                    "match": "(?<!\\.)\\b(?:(is)|(in))\\b",
                    "captures": {
                        "1": { "name": "keyword.other.is.tal" },
                        "2": { "name": "keyword.other.int.tal" }
                    }
                }
            ]
        },
        "end-of-expression": {
            "name": "punctuation.terminator.statement.tal",
            "match": ";"
        },
        "punctuation-accessor": {
            "name": "punctuation.accessor.tal",
            "match": "\\."
        },
        "punctuation-comma": {
            "name": "punctuation.separator.comma.tal",
            "match": ","
        },
        "punctuation-arrow": {
            "name": "keyword.operator.arrow.tal",
            "match": "->"
        },
        "punctuation-separator": {
            "name": "punctuation.separator.colon.tal",
            "match": ":"
        },
        "annotations": {
            "name": "storage.type.intrinsic.tal",
            "match": "(?<!\\.)\\b(Any|Never|Todo)\\b"
        },
        "void-literal": {
            "name": "constant.language.void.tal",
            "match": "(?<!\\.)\\bVoid\\b"
        },
        "boolean-literal": {
            "patterns": [
                {
                    "name": "constant.language.boolean.true.tal",
                    "match": "(?<!\\.)\\bTrue\\b"
                },
                {
                    "name": "constant.language.boolean.false.tal",
                    "match": "(?<!\\.)\\bFalse\\b"
                }
            ]
        },
        "numeric-literal": {
            "match": "(?<!\\w)\\d[0-9a-zA-Z\\.]*",
            "captures": {
                "0": {
                    "patterns": [
                        {
                            "begin": "(?=.)",
                            "end": "$",
                            "patterns": [
                                {
                                    "match": "0[xX][0-9a-fA-F]*",
                                    "name": "constant.numeric.hex.tal"
                                },
                                {
                                    "match": "0[bB][01]*",
                                    "name": "constant.numeric.binary.tal"
                                },
                                {
                                    "match": "(?!\\.$)(?:\\d*\\.?\\d*)",
                                    "name": "constant.numeric.decimal.tal"
                                },
                                {
                                    "match": "[0-9a-zA-Z\\.]+",
                                    "name": "invalid.illegal.constant.numeric.tal"
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "string-literal": {
            "patterns": [{ "include": "#string-literal-double" }]
        },
        "string-literal-double": {
            "name": "string.quoted.double.tal",
            "begin": "(\")",
            "end": "(\")|((?:[\\\\\\n])$)",
            "beginCaptures": {
                "0": { "name": "punctuation.definition.string.begin.tal" }
            },
            "endCaptures": {
                "1": { "name": "punctuation.definition.string.end.tal" },
                "2": { "name": "invalid.illegal.newline.tal" }
            },
            "patterns": [{ "include": "#string-character-escape" }]
        },
        "string-character-escape": {
            "name": "constant.charater.escape.tal",
            "match": "\\\\(['\"\\\\0abfnrtv]|x[0-9a-fA-F]{1,4}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4})"
        },
        "identifier": {
            "name": "variable.other.tal",
            "match": "[_[:alpha:]][_[:alnum:]]*"
        },
        "comments": {
            "patterns": [{ "include": "#comments-documentation" }, { "include": "#comments-inline" }]
        },
        "comments-documentation": {
            "name": "comment.block.documentation.talos",
            "begin": "///",
            "while": "^\\s*///"
        },
        "comments-inline": {
            "match": "((//).*)$",
            "captures": {
                "1": { "name": "comment.line.double-slash.talos" }
            }
        }
    }
}
